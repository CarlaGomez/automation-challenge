# Automation challenge

This framework consists of two parts:

#### 1. UI Automation of 10 of the most important test cases in http://automationpractice.com/index.php

These test cases are:

1. Sign up
2. Log in
3. Search for an item using the navigation
4. Search for an item using the search bar
5. Sort the items by lowest price
6. View detail of an item
7. Add the item to the shopping cart
8. View the shopping cart
9. Complete the purchase
10. Log out

The test cases are documented in the test management tool TestBench. To access the test suite, send an email to carlagomezp1@gmail.com

#### 2. API Automation of 3 endpoints of the Marvel API https://developer.marvel.com

1. Fetch all Marvel characters
2. Fetch all Spider-Man comics
3. Fetch all X-Man characters

## Tools and technologies

* Javascript
* Cypress.io
* Allure reports
* Circle CI

## How to run the tests locally

### Pre-requisites

* Node.js needs to be installed
* If you are using a Mac, go to the `package.json`, in scripts replace the cy:run command with `"yarn cypress run --env allure=true"` and the allure:clear command with this one `"allure:clear": "rm -r allure-results/ allure-report cypress/videos || true"`
* Go to https://developer.marvel.com and create an account to get a public and a private API key (This is Optional, is required for step 3 of intallation)

### installation

1. Clone the repo
   ```sh
   git clone https://github.com/CarlaGomez/automation-challenge.git
   ```
2. Install NPM packages: The dependencies are going to be installed (Cypress.io, Allure plugin, Cypress wait until, Faker.js)
   ```sh
   npm install
   ```
3. This is an optional step: go to the `cypress.env.json`, and paste your own generated timestamp, public key and md5 hash:
   ```JS
   {
    "API_URL": "https://gateway.marvel.com:443/v1/public",
    "TIMESTAMP":"<Generate a timestamp and paste it here>", //Generate a timestamp on this page https://timestampgenerator.com/
    "PUBLIC_KEY": "<Paste your Marvel API public key here>",
    "HASH": "<Generate a md5 hash and paste it here>", //Generate a md5 hash on this page https://www.md5hashgenerator.com/
    //To generate a hash, paste your previously generated timestamp, your private key and your public key all together, then copy the md5 hash
    "USER_NAME": "<Type an email here>", //This email must be from a exiting account on http://automationpractice.com/index.php
    "PASSWORD": "<Type a password here>" //This password must be from a exiting account on http://automationpractice.com/index.php
    //Mocked credentials for http://automationpractice.com/index.php username: "Judd_Senger91@gmail.com" password: Test1234*
    }
   ```
4. Run the tests using the cypress Test Runner. Type on the terminal:
 ```sh
  npx cypress open
   ```
5. Run the tests on headless mode (Allure reports will be generated by running the tests this way). Type on the terminal:
```sh
  npm test
   ```

## Known issues

* http://automationpractice.com/index.php has some load issues, sometimes tests may fail because of it
* For negative test cases, bad calls on API requests can pass to the assertions with failOnStatusCode: false

## Considerations
* The dessign pattern is a combianation of POM and the best cypress practices
* Features that are constantly reused are created as custom commands (Log in, Search, View Item) on `support/commands.js`
* Cookies are preserved on the checkout.spec.js
* Data is created on `fixtures`
* The CI pipeline is configured through a Circle CI orb

## Contributing

Contributions are what make the open source community such an amazing place to be learn, inspire, and create. Any contributions you make are **greatly appreciated**.

1. Fork the Project
2. Create your Feature Branch
3. Commit your Changes
4. Push to the Branch 
5. Open a Pull Request


## Acknowledgements
* [Cypress.io](https://www.cypress.io/)
* [CircleCI Orbs](https://circleci.com/orbs/)
